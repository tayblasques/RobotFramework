<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 5.0.1 (Python 3.10.6 on win32)" generated="20220902 13:09:14.452" rpa="false" schemaversion="3">
<suite id="s1" name="agentUpdaterTests" source="C:\Git\RobotFramework\Automation\AgentUpdater\TestCases\agentUpdaterTests.robot">
<test id="s1-t1" name="Test Case 01 - Check Stopped Services" line="6">
<kw name="Given there is a new application version" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:14.529" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install"&gt;C:\FakeProject\Install&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:14.528" endtime="20220902 13:09:14.529"/>
</kw>
<status status="PASS" starttime="20220902 13:09:14.528" endtime="20220902 13:09:14.529"/>
</kw>
<kw name="When request to update application" library="agentUpdaterResources">
<kw name="Log To Console" library="BuiltIn">
<arg>New Version of Application</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:14.530" endtime="20220902 13:09:14.531"/>
</kw>
<status status="PASS" starttime="20220902 13:09:14.530" endtime="20220902 13:09:14.531"/>
</kw>
<kw name="Then the service must be stopped" library="agentUpdaterResources">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc_code}</var>
<var>${output}</var>
<arg>sc query ${stopped_service} | findstr /i STOPPED</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20220902 13:09:14.557" level="INFO">Running command 'sc query AppMgmt | findstr /i STOPPED 2&gt;&amp;1'.</msg>
<msg timestamp="20220902 13:09:14.971" level="INFO">${rc_code} = 0</msg>
<msg timestamp="20220902 13:09:14.971" level="INFO">${output} =         STATE              : 1  STOPPED </msg>
<status status="PASS" starttime="20220902 13:09:14.532" endtime="20220902 13:09:14.971"/>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<arg>'${rc_code}' != '0'</arg>
<arg>Fail</arg>
<arg>Service is not stopped!</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20220902 13:09:14.971" endtime="20220902 13:09:14.972"/>
</kw>
<kw name="Log To Console" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:14.972" endtime="20220902 13:09:14.973"/>
</kw>
<status status="PASS" starttime="20220902 13:09:14.532" endtime="20220902 13:09:14.974"/>
</kw>
<doc>This test verifies if the services were correctly stopped</doc>
<tag>services</tag>
<tag>stopped</tag>
<status status="PASS" starttime="20220902 13:09:14.527" endtime="20220902 13:09:14.975"/>
</test>
<test id="s1-t2" name="Test Case 02 - Check Running Services" line="13">
<kw name="Given there is a new application version" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:15.287" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install"&gt;C:\FakeProject\Install&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:15.286" endtime="20220902 13:09:15.287"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.285" endtime="20220902 13:09:15.287"/>
</kw>
<kw name="When the agent updater finishs the installation" library="agentUpdaterResources">
<kw name="Log To Console" library="BuiltIn">
<arg>Application updated!</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:15.558" endtime="20220902 13:09:15.561"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.557" endtime="20220902 13:09:15.561"/>
</kw>
<kw name="Then the Service must be started" library="agentUpdaterResources">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc_code}</var>
<var>${output}</var>
<arg>sc query ${running_service} | findstr /i RUNNING</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20220902 13:09:15.613" level="INFO">Running command 'sc query Appinfo | findstr /i RUNNING 2&gt;&amp;1'.</msg>
<msg timestamp="20220902 13:09:15.791" level="INFO">${rc_code} = 0</msg>
<msg timestamp="20220902 13:09:15.791" level="INFO">${output} =         STATE              : 4  RUNNING </msg>
<status status="PASS" starttime="20220902 13:09:15.567" endtime="20220902 13:09:15.791"/>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<arg>'${rc_code}' != '0'</arg>
<arg>Fail</arg>
<arg>Service is not running!</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20220902 13:09:15.791" endtime="20220902 13:09:15.791"/>
</kw>
<kw name="Log To Console" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:15.791" endtime="20220902 13:09:15.791"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.566" endtime="20220902 13:09:15.791"/>
</kw>
<doc>This test verifies if the services were correctly stopped</doc>
<tag>services</tag>
<status status="PASS" starttime="20220902 13:09:15.187" endtime="20220902 13:09:15.791"/>
</test>
<test id="s1-t3" name="Test Case 03 - Existing Files" line="20">
<kw name="Given I'm in the application folder" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:15.803" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install"&gt;C:\FakeProject\Install&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:15.802" endtime="20220902 13:09:15.803"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.801" endtime="20220902 13:09:15.803"/>
</kw>
<kw name="When I search for the update file" library="agentUpdaterResources">
<kw name="List Directory" library="OperatingSystem">
<var>${result}</var>
<arg>path=${path}</arg>
<doc>Returns and logs items in a directory, optionally filtered with ``pattern``.</doc>
<msg timestamp="20220902 13:09:15.805" level="INFO" html="true">Listing contents of directory '&lt;a href="file://C:\FakeProject\Install"&gt;C:\FakeProject\Install&lt;/a&gt;'.</msg>
<msg timestamp="20220902 13:09:15.805" level="INFO">4 items:
Backup
Logs
teste.txt
xyz.txt</msg>
<msg timestamp="20220902 13:09:15.805" level="INFO">${result} = ['Backup', 'Logs', 'teste.txt', 'xyz.txt']</msg>
<status status="PASS" starttime="20220902 13:09:15.804" endtime="20220902 13:09:15.805"/>
</kw>
<kw name="Log To Console" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:15.806" endtime="20220902 13:09:15.806"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${result}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20220902 13:09:15.807" level="INFO">${result} = ['Backup', 'Logs', 'teste.txt', 'xyz.txt']</msg>
<status status="PASS" starttime="20220902 13:09:15.806" endtime="20220902 13:09:15.807"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.804" endtime="20220902 13:09:15.807"/>
</kw>
<kw name="Then the file should exist" library="agentUpdaterResources">
<kw name="File Should Exist" library="OperatingSystem">
<arg>path=${path}/teste.txt</arg>
<doc>Fails unless the given ``path`` points to an existing file.</doc>
<msg timestamp="20220902 13:09:15.809" level="INFO" html="true">File '&lt;a href="file://C:\FakeProject\Install\teste.txt"&gt;C:\FakeProject\Install\teste.txt&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:15.809" endtime="20220902 13:09:15.809"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.808" endtime="20220902 13:09:15.810"/>
</kw>
<doc>This test verifies if the files were correct saved in its path</doc>
<tag>files</tag>
<status status="PASS" starttime="20220902 13:09:15.800" endtime="20220902 13:09:15.810"/>
</test>
<test id="s1-t4" name="Test Case 04 - Check if Backup Folder exists" line="27">
<kw name="Given I'm in the application folder" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:15.814" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install"&gt;C:\FakeProject\Install&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:15.813" endtime="20220902 13:09:15.814"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.812" endtime="20220902 13:09:15.814"/>
</kw>
<kw name="When I search for backup folder" library="agentUpdaterResources">
<kw name="List Directories In Directory" library="OperatingSystem">
<var>${result}</var>
<arg>path=${path}</arg>
<doc>Wrapper for `List Directory` that returns only directories.</doc>
<msg timestamp="20220902 13:09:15.815" level="INFO" html="true">Listing contents of directory '&lt;a href="file://C:\FakeProject\Install"&gt;C:\FakeProject\Install&lt;/a&gt;'.</msg>
<msg timestamp="20220902 13:09:15.817" level="INFO">2 directories:
Backup
Logs</msg>
<msg timestamp="20220902 13:09:15.817" level="INFO">${result} = ['Backup', 'Logs']</msg>
<status status="PASS" starttime="20220902 13:09:15.815" endtime="20220902 13:09:15.817"/>
</kw>
<kw name="Log To Console" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:15.817" endtime="20220902 13:09:15.818"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.814" endtime="20220902 13:09:15.818"/>
</kw>
<kw name="Then the folder should exist" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${bkp_path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:15.820" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install\Backup"&gt;C:\FakeProject\Install\Backup&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:15.819" endtime="20220902 13:09:15.820"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.818" endtime="20220902 13:09:15.820"/>
</kw>
<doc>This test verifies if the backup folder exists</doc>
<tag>files</tag>
<status status="PASS" starttime="20220902 13:09:15.811" endtime="20220902 13:09:15.821"/>
</test>
<test id="s1-t5" name="Test Case 05 - Backup folder must not be empty" line="34">
<kw name="Given I'm in the backup folder" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${bkp_path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:15.825" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install\Backup"&gt;C:\FakeProject\Install\Backup&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:15.824" endtime="20220902 13:09:15.825"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.823" endtime="20220902 13:09:15.825"/>
</kw>
<kw name="When I check if the backup folder is empty" library="agentUpdaterResources">
<kw name="Directory Should Not Be Empty" library="OperatingSystem">
<arg>path=${bkp_path}</arg>
<doc>Fails if the specified directory is empty.</doc>
<msg timestamp="20220902 13:09:15.828" level="INFO" html="true">Listing contents of directory '&lt;a href="file://C:\FakeProject\Install\Backup"&gt;C:\FakeProject\Install\Backup&lt;/a&gt;'.</msg>
<msg timestamp="20220902 13:09:15.828" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install\Backup"&gt;C:\FakeProject\Install\Backup&lt;/a&gt;' contains 3 items.</msg>
<status status="PASS" starttime="20220902 13:09:15.827" endtime="20220902 13:09:15.829"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.826" endtime="20220902 13:09:15.829"/>
</kw>
<kw name="Then the folder must not be empty" library="agentUpdaterResources">
<kw name="List Directory" library="OperatingSystem">
<var>${result2}</var>
<arg>path=${bkp_path}</arg>
<doc>Returns and logs items in a directory, optionally filtered with ``pattern``.</doc>
<msg timestamp="20220902 13:09:15.834" level="INFO" html="true">Listing contents of directory '&lt;a href="file://C:\FakeProject\Install\Backup"&gt;C:\FakeProject\Install\Backup&lt;/a&gt;'.</msg>
<msg timestamp="20220902 13:09:15.835" level="INFO">3 items:
Backup
teste.txt
xyz.txt</msg>
<msg timestamp="20220902 13:09:15.835" level="INFO">${result2} = ['Backup', 'teste.txt', 'xyz.txt']</msg>
<status status="PASS" starttime="20220902 13:09:15.830" endtime="20220902 13:09:15.835"/>
</kw>
<kw name="Log To Console" library="BuiltIn">
<arg>${result2}</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" starttime="20220902 13:09:15.836" endtime="20220902 13:09:15.841"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${result2}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20220902 13:09:15.844" level="INFO">${result2} = ['Backup', 'teste.txt', 'xyz.txt']</msg>
<status status="PASS" starttime="20220902 13:09:15.842" endtime="20220902 13:09:15.848"/>
</kw>
<status status="PASS" starttime="20220902 13:09:15.830" endtime="20220902 13:09:15.850"/>
</kw>
<doc>This test verifies the content of the backup folder</doc>
<tag>files</tag>
<status status="PASS" starttime="20220902 13:09:15.822" endtime="20220902 13:09:15.899"/>
</test>
<test id="s1-t6" name="Test Case 06 - Backup folder content validation" line="41">
<kw name="Given I'm in the backup folder" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${bkp_path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:16.381" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install\Backup"&gt;C:\FakeProject\Install\Backup&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:16.380" endtime="20220902 13:09:16.382"/>
</kw>
<status status="PASS" starttime="20220902 13:09:16.376" endtime="20220902 13:09:16.382"/>
</kw>
<kw name="When I compare the backup folder with the previous archive folder" library="agentUpdaterResources">
<kw name="Should Be Equal" library="BuiltIn">
<var>${final_result}</var>
<arg>${result}</arg>
<arg>${result2}</arg>
<doc>Fails if the given objects are unequal.</doc>
<msg timestamp="20220902 13:09:16.409" level="FAIL">['Backup', 'Logs', 'teste.txt', 'xyz.txt'] != ['Backup', 'teste.txt', 'xyz.txt']</msg>
<status status="FAIL" starttime="20220902 13:09:16.402" endtime="20220902 13:09:16.409"/>
</kw>
<kw name="Create List" library="BuiltIn">
<var>${compare_list}</var>
<arg>${result}</arg>
<arg>${result2}</arg>
<doc>Returns a list containing given items.</doc>
<status status="NOT RUN" starttime="20220902 13:09:16.410" endtime="20220902 13:09:16.410"/>
</kw>
<kw name="Set Test Variable" library="BuiltIn">
<arg>${compare_list}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<status status="NOT RUN" starttime="20220902 13:09:16.410" endtime="20220902 13:09:16.410"/>
</kw>
<status status="FAIL" starttime="20220902 13:09:16.401" endtime="20220902 13:09:16.411"/>
</kw>
<kw name="Then Both folders must have the same content" library="agentUpdaterResources">
<status status="NOT RUN" starttime="20220902 13:09:16.429" endtime="20220902 13:09:16.429"/>
</kw>
<doc>This test verifies the content of the backup folder</doc>
<tag>files</tag>
<status status="FAIL" starttime="20220902 13:09:16.343" endtime="20220902 13:09:16.432">['Backup', 'Logs', 'teste.txt', 'xyz.txt'] != ['Backup', 'teste.txt', 'xyz.txt']</status>
</test>
<test id="s1-t7" name="Test Case 08 - Log file validation" line="48">
<kw name="Given I'm in the log folder" library="agentUpdaterResources">
<kw name="Directory Should Exist" library="OperatingSystem">
<arg>path=${log_path}</arg>
<doc>Fails unless the given path points to an existing directory.</doc>
<msg timestamp="20220902 13:09:16.449" level="INFO" html="true">Directory '&lt;a href="file://C:\FakeProject\Install\Logs"&gt;C:\FakeProject\Install\Logs&lt;/a&gt;' exists.</msg>
<status status="PASS" starttime="20220902 13:09:16.448" endtime="20220902 13:09:16.450"/>
</kw>
<status status="PASS" starttime="20220902 13:09:16.448" endtime="20220902 13:09:16.450"/>
</kw>
<kw name="When I search for content" library="agentUpdaterResources">
<kw name="Get File" library="OperatingSystem">
<var>${TextFileContent}</var>
<arg>path=${log_archive}</arg>
<doc>Returns the contents of a specified file.</doc>
<msg timestamp="20220902 13:09:16.457" level="INFO" html="true">Getting file '&lt;a href="file://C:\FakeProject\Install\Logs\log.txt"&gt;C:\FakeProject\Install\Logs\log.txt&lt;/a&gt;'.</msg>
<msg timestamp="20220902 13:09:16.469" level="INFO">${TextFileContent} = </msg>
<status status="PASS" starttime="20220902 13:09:16.457" endtime="20220902 13:09:16.470"/>
</kw>
<kw name="Set Test Variable" library="BuiltIn">
<arg>${TextFileContent}</arg>
<doc>Makes a variable available everywhere within the scope of the current test.</doc>
<msg timestamp="20220902 13:09:16.470" level="INFO">${TextFileContent} = </msg>
<status status="PASS" starttime="20220902 13:09:16.470" endtime="20220902 13:09:16.470"/>
</kw>
<status status="PASS" starttime="20220902 13:09:16.456" endtime="20220902 13:09:16.471"/>
</kw>
<kw name="Then the content must be there" library="agentUpdaterResources">
<kw name="Log" library="BuiltIn">
<arg>${TextFileContent}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20220902 13:09:16.477" level="INFO"/>
<status status="PASS" starttime="20220902 13:09:16.476" endtime="20220902 13:09:16.477"/>
</kw>
<status status="PASS" starttime="20220902 13:09:16.475" endtime="20220902 13:09:16.477"/>
</kw>
<doc>This test verifies the content of the log file</doc>
<tag>log</tag>
<status status="PASS" starttime="20220902 13:09:16.446" endtime="20220902 13:09:16.489"/>
</test>
<doc>This suite tests the agent updater features</doc>
<status status="FAIL" starttime="20220902 13:09:14.457" endtime="20220902 13:09:16.525"/>
</suite>
<statistics>
<total>
<stat pass="6" fail="1" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="3" fail="1" skip="0">files</stat>
<stat pass="1" fail="0" skip="0">log</stat>
<stat pass="2" fail="0" skip="0">services</stat>
<stat pass="1" fail="0" skip="0">stopped</stat>
</tag>
<suite>
<stat pass="6" fail="1" skip="0" id="s1" name="agentUpdaterTests">agentUpdaterTests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
